{% extends 'base.html' %}

{% block title %}Hasil Pencarian untuk "{{ query }}"{% endblock %}

{% block content %}
<div class="uk-section uk-section-small uk-preserve-color">
    <div class="uk-container">
        <h2 class="uk-h2 uk-text-center uk-margin-large-bottom">Hasil Pencarian untuk "{{ query }}"</h2>

        {% if not product_results and not blog_results %}
        <div class="uk-alert-warning" uk-alert>
            <p>Tidak ada hasil yang ditemukan untuk <strong>"{{ query }}"</strong>.</p>
        </div>
        {% endif %}

        {# Product Results #}
        {% if product_results %}
        <h3 class="uk-h3 uk-margin-top">Produk ({{ product_results | length }})</h3>
        <div class="uk-child-width-1-2@s uk-child-width-1-3@m uk-child-width-1-4@l uk-grid-match" uk-grid>
            {% for product in product_results %}
            <div>
                <div class="uk-card uk-card-default uk-card-hover">
                    <div class="uk-card-media-top">
                        <img src="{{ product.image_url }}" alt="{{ product.name }}" uk-cover>
                    </div>
                    <div class="uk-card-body">
                        <h3 class="uk-card-title uk-margin-remove-bottom">{{ product.name }}</h3>
                        <p class="uk-text-meta uk-margin-remove-top">Rp {{ "{:,.0f}".format(product.price) }}</p>
                        <a href="{{ url_for('product_detail', id=product._id) }}" class="uk-button uk-button-text" style="color: #fff;">Lihat Detail</a>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        {% endif %}

        {# Blog Results #}
        {% if blog_results %}
        <h3 class="uk-h3 uk-margin-large-top">Postingan Blog ({{ blog_results | length }})</h3>
        <div class="uk-child-width-1-2@s uk-child-width-1-3@m" uk-grid>
            {% for post in blog_results %}
            <div>
                <div class="uk-card uk-card-default uk-card-hover">
                    <div class="uk-card-media-top">
                        <img src="{{ post.image_url }}" alt="{{ post.title }}" uk-cover>
                    </div>
                    <div class="uk-card-body">
                        <h3 class="uk-card-title uk-margin-remove-bottom">{{ post.title }}</h3>
                        <p class="uk-text-meta uk-margin-remove-top">{{ post.author }} pada {{ post.date_posted.strftime('%d %b %Y') }}</p>
                        <a href="{{ url_for('blog_post', id=post._id) }}" class="uk-button uk-button-text" style="color: #fff;">Baca Selengkapnya</a>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        {% endif %}

    </div>
</div>
{% endblock %}